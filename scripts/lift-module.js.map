{"version":3,"sources":["../lib/scripts/lift-module.js"],"names":[],"mappings":"AAAA;AAAA,GACG,KAAK,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM;AAAA;AAAA;AAAA;AAAA,GAI1B,QAAQ,GAAG,KAAK,CAAC,QAAQ;AAAA,EAC1B,GAAG,EAAE,UAAU,OAAO,IAAI,CAAC,SAAS;AAAA,OAC/B,QAAQ,OAAO,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ;AAAA,OACvC,OAAO,OAAO,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM;AAAA,MAC9C,MAAM;AAAA,MACN,QAAQ;AAAA,MACR,aAAa;AAAA,MACb,QAAQ,GAAG,QAAQ,CAAC,KAAK,EAAE,KAAK;AAAA,QAC9B,GAAG,EAAE,OAAO,OAAO,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI;AAAA;AAAA,SAEtC,OAAO;AAAA,WACL,MAAM,GAAG,KAAK,KAAK,KAAK,MAAM,KAAK,OAAO,CAAC;AAAA;AAAA,QAE9C,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC;AAAA,WAChC,OAAO;AAAA,aACL,MAAM,CAAC,KAAK,CAAC,CAAC;AAAA;AAAA;AAAA,QAGnB,MAAM,EAAE,OAAO;AAAA;AAAA;AAAA,KAGlB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM;AAAA,GAChC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,EAAE,QAAQ;AAAA,IACtE,GAAG,EAAE,IAAI,KAAK,IAAI;AAAA,SACb,KAAK,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU;AAAA,QAC/C,UAAU;AAAA,QACV,IAAI,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,GAAG,IAAI;AAAA,QAC3D,eAAe,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,KAAK,CAAC;AAAA,QAC9D,OAAO,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,KAAK,CAAC;AAAA,QACnD,IAAI,GAAG,MAAM,EAAE,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,QAAQ,SAAS,KAAK,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,KAAK;AAAA,SAClH,MAAM,OAAO,MAAM,CAAC,KAAK,MAAM,QAAQ,UAAU,IAAI,MAAM,MAAM;AAAA,SACjE,YAAY,OAAO,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,MAAM;AAAA;AAAA,IAEtD,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;AAAA,MAChC,IAAI,CAAC,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;AAAA;AAAA;AAAA,KAG5B,OAAO,CAAC,MAAM,EAAE,MAAM;AAAA,KACtB,KAAK,CAAC,SAAS;AAAA;AAAA,IAEhB,EAAE,EAAE,QAAQ,KAAK,CAAC;AAAA,OACf,IAAI,CAAC,QAAQ,EAAE,QAAQ;AAAA;AAAA,IAE1B,IAAI;AAAA,OACD,IAAI,CAAC,QAAQ,EAAE,MAAM;AAAA;AAAA;AAAA,IAGxB,MAAM,CAAC,IAAI,KAAK,KAAK;AAAA,IACrB,QAAQ,CAAC,QAAQ,KAAK,IAAI;AAAA;AAAA,OAEvB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI;AAAA,KAC/C,KAAK,CAAC,IAAI,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,QAAQ,EAAE,OAAO;AAAA,MACnD,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,OAAO,CAAC;AAAA,QAClC,GAAG,CAAC,KAAK,KAAK,IAAI,EAAE,IAAI;AAAA,aACnB,UAAU,OAAO,MAAM,CAAC,KAAK,MAAM,OAAO,UAAU,KAAK,MAAM,MAAM;AAAA;AAAA,QAE1E,UAAU,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI;AAAA;AAAA,QAE5B,EAAE,EAAE,OAAO,KAAK,eAAe,IAAI,OAAO,KAAK,OAAO;AAAA,WACnD,YAAY,CAAC,MAAM,EAAE,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,IAKtC,EAAE,EAAE,QAAQ,KAAK,CAAC;AAAA,OACf,YAAY;AAAA,SACV,QAAQ,EAAE,QAAQ;AAAA;AAAA,IAEvB,IAAI;AAAA,OACD,YAAY;AAAA,SACV,QAAQ,EAAE,MAAM;AAAA;AAAA;AAAA,OAGlB,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK;AAAA,KACxD,YAAY,CAAC,MAAM,CAAC,QAAQ;AAAA,OAC1B,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,UAAU,GAAG,IAAI,EAAE,GAAG,MAAM,CAAC;AAAA,SAChE,SAAS,EAAE,MAAM;AAAA;AAAA;AAAA,IAGtB,aAAa,CAAC,QAAQ,KAAK,YAAY;AAAA;AAAA;AAAA,KAGtC,MAAM,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO;AAAA,GACnD,OAAO,CAAC,MAAM,CAAC,QAAQ;AAAA,IACtB,GAAG,CAAC,MAAM,KAAK,IAAI,EAAE,GAAG;AAAA,QACpB,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI;AAAA;AAAA,IAEhD,QAAQ,CAAC,MAAM;AAAA,OACZ,QAAQ,EAAE,MAAM;AAAA,OAChB,WAAW,EAAE,QAAQ;AAAA,IACxB,aAAa,CAAC,MAAM;AAAA,OACjB,QAAQ,EAAE,MAAM;AAAA,OAChB,WAAW,EAAE,QAAQ;AAAA,IACxB,MAAM,CAAC,IAAI;AAAA,OACR,SAAS,EAAE,MAAM;AAAA,IACpB,QAAQ,CAAC,MAAM;AAAA,OACZ,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,QAAQ;AAAA,OAClC,QAAQ,EAAE,QAAQ;AAAA,OAClB,WAAW,EAAE,MAAM;AAAA,IACtB,aAAa,CAAC,MAAM;AAAA,OACjB,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM;AAAA,OAC3B,QAAQ,EAAE,QAAQ;AAAA,OAClB,WAAW,EAAE,MAAM;AAAA;AAAA;AAAA;AAAA,KAIrB,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE,CAAC,GAAG,CAAC,IAAI;AAAA,GAC9B,QAAQ;AAAA,KACN,MAAM,CAAC,QAAQ,EAAE,KAAK,IAAI,OAAO;AAAA,KACjC,MAAM,CAAC,QAAQ,EAAE,OAAO,GAAG,aAAa;AAAA,GAC1C,UAAU;AAAA,KACR,MAAM,EAAE,QAAQ;AAAA","file":"lift-module.js","sourcesContent":["/**\n * Apply the liftGraph plugin.\n * ----------------------------------------------------------------------------\n */\n\n$( document ).ready(function () {\n  var $statistics = $('.lift-statisics'),\n      $switches = $('<div class=\"lift-switches\">'),\n      $chooser = $('<select class=\"lift-graph-switch\">'),\n      graphs = {},\n      children = [],\n      dataSelectors = [],\n      formItem = function(label, input) {\n        var $wrapper = $('<div class=\"form-item\">');\n\n        $wrapper\n          .append('<label>' + label + '</label>' + \"\\n\");\n\n        for (var i = 0; i < input.length; i++) {\n          $wrapper\n            .append(input[i]);\n        }\n\n        return $wrapper;\n      };\n\n  // Process the data in all tables.\n  $statistics.children('.lift-statistic-category').each(function (graphKey) {\n    var $this = $(this),\n        $graph = $this.find('table[data-lift-statistics]');\n        dataLabels = [],\n        name = $this.children('.lift-statistic-category-name').text(),\n        variationColumn = $graph.attr('data-liftgraph-columnname') - 1,\n        xColumn = $graph.attr('data-liftgraph-columnx') - 1,\n        attr = typeof $graph.attr('data-liftgraph-excluded') !== 'undefined' ? $graph.attr('data-liftgraph-excluded').split(',') : [];\n        $option = $('<option value=\"' + graphKey + '\">' + name + '</option>')\n        $dataSelector = $('<select class=\"lift-data-switch\">');\n\n    for (var i = 0; i < attr.length; i++) {\n      attr[i] = parseFloat(attr[i]);\n    }\n\n    $chooser.append($option);\n    $graph.liftGraph();\n\n    if (graphKey !== 0) {\n      $this.addClass('inactive')\n    }\n    else {\n      $this.addClass('active')\n    }\n\n    graphs[name] = $graph;\n    children[graphKey] = $this;\n\n    // Collect the data able to be fed to the y-axis.\n    $graph.find('thead > tr > th').each(function (dataKey) {\n      if (attr.indexOf(dataKey + 1) === -1) {\n        var label = $(this).text(),\n            $dataOption = $('<option value=\"' + dataKey + '\">' + label + '</option>');\n\n        dataLabels.push($(this).text());\n\n        if (dataKey !== variationColumn && dataKey !== xColumn) {\n          $dataSelector.append($dataOption);\n        }\n      }\n    });\n\n    if (graphKey !== 0) {\n      $dataSelector\n        .addClass('inactive')\n    }\n    else {\n      $dataSelector\n        .addClass('active')\n    }\n\n    // Change the data fed to the y-axis and update the graph.\n    $dataSelector.change(function () {\n      $graph.attr('data-liftgraph-columny', parseFloat($(this).val()) + 1)\n        .liftGraph('update');\n    })\n\n    dataSelectors[graphKey] = $dataSelector;\n  });\n\n  // Change the displayed data when the select changes.\n  $chooser.change(function () {\n    var option = $(this).val(),\n        text = this.options[this.selectedIndex].text;\n\n    children[option]\n      .addClass('active')\n      .removeClass('inactive');\n    dataSelectors[option]\n      .addClass('active')\n      .removeClass('inactive');\n    graphs[text]\n      .liftGraph('update');\n    children[option]\n      .siblings('.lift-statistic-category')\n      .addClass('inactive')\n      .removeClass('active');\n    dataSelectors[option]\n      .siblings('.lift-data-switch')\n      .addClass('inactive')\n      .removeClass('active');\n  });\n\n\n  // Add all switches to the page.\n  $switches\n    .append(formItem('Goals', $chooser))\n    .append(formItem('Metrics', dataSelectors));\n  $statistics\n    .before($switches);\n});\n"]}